# LOGalyzerÂ ğŸ“Š  
_Endâ€‘toâ€‘end ingestion, parsing & anomalyâ€‘detection pipeline for largeâ€‘scale Androidâ€‘TV / STB logs_

![LOGalyzer banner](docs/img/banner.png)

LOGalyzer (formerly **logJAM**) automates everything from pulling raw device logs all the way to interactive
dashboards:

1. **Ingest** hundreds of gigabytes of compressed logs into PostgreSQL.
2. **Parse & normalise** the Video/Audio Rendering (VAR) lines with a faultâ€‘tolerant Python parser.
3. **Analyse** each playback session (varnalyzer) & store JSON summaries.
4. **Detect anomalies** with both LSTM and Autoâ€‘Encoder models.
5. **Visualise** results in ApacheÂ Superset dashboards.
6. **Automate field updates** (e.g. _jamâ€‘software_ endpoint).

---

## TableÂ ofÂ Contents
1. [Features](#features)
2. [Architecture](#architecture)
3. [QuickÂ Start](#quick-start)
4. [DirectoryÂ Layout](#directory-layout)
5. [Configuration](#configuration)
6. [CLIÂ Cookbook](#cli-cookbook)
7. [SupersetÂ Dashboards](#superset-dashboards)
8. [ConcurrencyÂ Scripts](#concurrency-scripts)
9. [DevelopmentÂ &Â Contributing](#development--contributing)
10. [License](#license)

---

## Features
| Area | Highlights |
|------|------------|
| **Ingestion** | â€¢ Multiâ€‘process gzip reader<br>â€¢ Connectionâ€‘pooled inserts (`psycopg2.pool`)<br>â€¢ Autoâ€‘creates `R##########` tables on the fly |
| **Parsing** | â€¢ Supports multiple timestamp formats<br>â€¢ Extracts `category`, `function`, `data`, `event_type`, etc.<br>â€¢ MD5 hash for idempotent loads |
| **Session analysis** | â€¢ Detects `CHANGE_CONTENT` boundaries<br>â€¢ Counts BlackScreen / VideoFreeze / DisplayDrop<br>â€¢ Collects HDMI, trickâ€‘mode, standby events |
| **MLÂ anomaly detection** | â€¢ LSTMâ€‘based timeâ€‘series detector<br>â€¢ Autoâ€‘Encoder reconstruction error<br>â€¢ Consolidated results in `anomalies_consolidated` |
| **Dashboards** | â€¢ Parameterised SQL templates (time span / granularity)<br>â€¢ Scatter, bar & line charts for exec overviews |
| **Automation** | â€¢ `jam-software` Flask route to push apps & record JSON events |
| **Ops** | â€¢ Pureâ€‘Bash pipeline launcher (`run_for_rxids.sh`) with perâ€‘step flags & 5â€‘way parallelism |

---

## Architecture
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     gzip     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   parsed rows  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CCShare â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ingestion/   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  PostgreSQL  â”‚
â”‚   (NFS)  â”‚             â”‚ log_ingest.pyâ”‚                â”‚     logs     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                              â”‚
                         sessions & JSON summaries            â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
                     â”‚ analysis/varnalyzer.py    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                 anomalies_consolidated (LSTM/AE)
                               â”‚
                               â–¼
                       Apache Superset ğŸ“Š
